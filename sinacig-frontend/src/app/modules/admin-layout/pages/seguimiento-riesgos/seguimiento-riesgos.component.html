<div class="container-encabezado">
  <div class="container-info-periodo">
    <div class="title-position">
      <h2 class="matriz-form__title">Periodo evaluado</h2>
    </div>
    <div class="container-cards-periodo">
      <div class="card card-style">
        <div class="card-header card-header-periodo text-white">
          Unidad Ejecutora:
        </div>
        <div class="card-body card-body-periodo text-black">
          {{concatCodigoUnidad}}
        </div>
      </div>
      <div class="card card-style">
        <div class="card-header card-header-periodo text-white">
          Fecha inicio:
        </div>
        <div class="card-body card-body-periodo text-black">
          {{matrizEncontrada.fecha_periodo_inicio | date: 'dd/MM/yyyy'}}
        </div>
      </div>
      <div class="card card-style">
        <div class="card-header card-header-periodo text-white">
          Fecha fin:
        </div>
        <div class="card-body card-body-periodo text-black">
          {{matrizEncontrada.fecha_periodo_fin | date: 'dd/MM/yyyy'}}
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container-body-riesgo">
  <div class="container_form_riesgos">
    <form [formGroup]="formSeguimiento">
      <h2 class="matriz-form__title mb-4 mt-4">Ingreso de seguimiento de riesgo</h2>
      <div class="double-inputs-form mb-4">
        <div class="form-floating">
          <select class="form-select" id="inputProbabilidad" aria-label="inputProbabilidad" [ngClass]="{
            'is-invalid': probabilidadInvalid,
            'is-valid': probabilidadValid
          }" formControlName="id_probabilidad">
            <option *ngFor="let probabilidad of probabilidades" [value]="probabilidad.id_probabilidad">
              {{probabilidad.nivel_probabilidad}}</option>
          </select>
          <label for="inputProbabilidad">Probabilidad</label>
          <div *ngIf="probabilidadInvalid" class="invalid-feed">
            Por favor ingresa un valor
          </div>
        </div>
        <div class="form-floating">
          <select class="form-select" id="inputSeveridad" aria-label="inputSeveridad" formControlName="id_severidad"
            [ngClass]="{
            'is-invalid': severidadInvalid,
            'is-valid': severidadValid
          }">
            <option *ngFor="let severidad of severidades" [value]="severidad.id_severidad">
              {{severidad.nivel_severidad}}</option>
          </select>
          <label for="inputSeveridad">Severidad</label>
          <div *ngIf="severidadInvalid" class="invalid-feed">
            Por favor ingresa un valor
          </div>
        </div>
        <div class="form-floating">
          <input type="number" class="form-control" id="riesgoRI" [value]="resultadoRI" [disabled]="true">
          <label for="riesgoRI">Riesgo Inherente (RI)</label>
        </div>
        <div class="form-floating">
          <select
            *ngIf="formSeguimiento.get('id_probabilidad')?.dirty && formSeguimiento.get('id_severidad')?.dirty; else elseControlMitigador"
            class="form-select" [ngClass]="{
                'is-invalid': controlMitigadorInvalid,
                'is-valid': controlMitigadorValid
              }" id="valorMitigador" aria-label="valorMitigador" formControlName="id_control_mitigador">
            <option *ngFor="let probabilidad of probabilidades" [value]="probabilidad.id_probabilidad">
              {{probabilidad.nivel_probabilidad}}</option>
          </select>
          <ng-template #elseControlMitigador>
            <input type="number" class="form-control" [value]="0" [disabled]="true">
          </ng-template>
          <label for="valorMitigador" class="">Control Mitigador</label>
          <div *ngIf="controlMitigadorInvalid" class="invalid-feed">
            Por favor ingresa un valor
          </div>
        </div>
        <div class="form-floating">
          <input type="number" class="form-control" id="riesgoRR" [value]="resultadoRR" [disabled]="true">
          <label for="riesgoRR">Riesgo Residual (RR)</label>
        </div>
        <div class="form-floating">
          <input type="text" id="inputMedida" [value]="medidaRiesgoInput" [disabled]="true" [ngClass]="{
            'form-control-bg': true,
            'form-control': true,
            'tolerable': medidaRiesgoEncontrado.id_medida_riesgo === 1,
            'gestionable': medidaRiesgoEncontrado.id_medida_riesgo === 2,
            'noTolerable': medidaRiesgoEncontrado.id_medida_riesgo === 3
          }" class="form-control">
          <label for="inputMedida">Medida de Riesgo</label>
        </div>
      </div>
      <div class="form-floating mb-5">
        <textarea maxlength="500" class="form-control" formControlName="comentario_seguimiento"
          placeholder="Ingresa un comentario" id="comentario_seguimiento" style="height: 130px"></textarea>
        <label for="comentario_seguimiento">Comentario</label>
      </div>
      <div class="mb-5">
        <label for="archivos" class="formFile">Subir archivos:</label>
        <input type="file" class="form-control" id="archivos" name="archivos" multiple
          (change)="onFilesSelected($event)">
      </div>
      <div class="container-btn-ingreso mt-5 mb-4">
        <button type="button" class="btn btn-danger btn-size" [routerLink]="routerLinkRiesgo"><i class="fa fa-ban"
            aria-hidden="true"></i> Cancelar</button>
        <button (click)="validarFormularioRiesgo()" type="button" class="btn btn-primary btn-size"><i class="fa fa-save"
            aria-hidden="true"></i> Guardar</button>
      </div>
    </form>









    <!-- Contenedor del visor de archivos -->

    <div class="wrapper-view-file mat-elevation-z8">
      <!-- <div class="min-height-prev">
        <ngx-loading [show]="isLoadinDoc"
          [config]="{animationType: ngxLoadingAnimationTypes.circleSwish, backdropBorderRadius: '3px'}">
        </ngx-loading>
        <p *ngIf="rowSelected.descripcion_archivo" class="titulo-float">{{rowSelected.descripcion_archivo}}</p>
        <embed *ngIf="documentURL && !contentEmdebIsImg" [src]="documentURL" class="w-100 h-100 doc-continer">
        <img *ngIf="documentURL && contentEmdebIsImg" [src]="documentURL" class="w-100 h-100 mx-auto" alt="img">
        <div class="container-img main__caja_texto w-100 h-100 d-flex flex-column justify-content-center"
          *ngIf="!documentURL">
          <mat-icon *ngIf="!documentURL" class="mx-auto icon-file">file_copy</mat-icon>
          <h4 class="mx-auto">
            Seleccione un documento en la lista para visualizar.
          </h4>
        </div>
      </div> -->
    </div>
  </div>
</div>